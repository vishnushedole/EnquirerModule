º
FC:\Eurofins Training\ConsoleApp\EnquiryModule\EnquiryModule\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder		 
.		 
Services		 
.		 
	AddScoped		 
<		 
IEnquiryModule		 )
,		) *
EnquiryModuleRepo		+ <
>		< =
(		= >
)		> ?
;		? @
builder

 
.

 
Services

 
.

 
	AddScoped

 
<

 
EnquiryModuleRepo

 ,
>

, -
(

- .
)

. /
;

/ 0
builder 
. 
Services 
. 
AddDbContext 
<  
EnquiryModuleContext 2
>2 3
(3 4
options4 ;
=>< >
options 
. 
UseSqlServer 
( 
builder  
.  !
Configuration! .
.. /
GetConnectionString/ B
(B C
$str	C †
)
† °
)
° ¢
)
¢ £
;
£ §
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. 

UseSwagger 
( 
) 
; 
app 
. 
UseSwaggerUI 
( 
) 
; 
} 
app 
. 
UseAuthorization 
( 
) 
; 
app   
.   
MapControllers   
(   
)   
;   
app"" 
."" 
Run"" 
("" 
)"" 	
;""	 
Á
MC:\Eurofins Training\ConsoleApp\EnquiryModule\EnquiryModule\Models\Manager.cs
	namespace 	
EnquiryModule
 
. 
Models 
; 
[ #
ExcludeFromCodeCoverage 
] 
public 
partial 
class 
Manager 
{		 
public

 

int

 
EmpId

 
{

 
get

 
;

 
set

 
;

  
}

! "
public 

string 
	FirstName 
{ 
get !
;! "
set# &
;& '
}( )
=* +
null, 0
!0 1
;1 2
public 

string 
LastName 
{ 
get  
;  !
set" %
;% &
}' (
=) *
null+ /
!/ 0
;0 1
public 

DateOnly 
DateOfBirth 
{  !
get" %
;% &
set' *
;* +
}, -
public 

string 
AddressLine 
{ 
get  #
;# $
set% (
;( )
}* +
=, -
null. 2
!2 3
;3 4
public 

int 
Pincode 
{ 
get 
; 
set !
;! "
}# $
public 

string 
PhoneNumber 
{ 
get  #
;# $
set% (
;( )
}* +
=, -
null. 2
!2 3
;3 4
public 

string 
Email 
{ 
get 
; 
set "
;" #
}$ %
=& '
null( ,
!, -
;- .
public 

string 
City 
{ 
get 
; 
set !
;! "
}# $
=% &
null' +
!+ ,
;, -
public 

string 
Country 
{ 
get 
;  
set! $
;$ %
}& '
=( )
null* .
!. /
;/ 0
public 

int 
? 
NoOfEnq 
{ 
get 
; 
set "
;" #
}$ %
public   

virtual   
ICollection   
<   
Enquirer   '
>  ' (
	Enquirers  ) 2
{  3 4
get  5 8
;  8 9
set  : =
;  = >
}  ? @
=  A B
new  C F
List  G K
<  K L
Enquirer  L T
>  T U
(  U V
)  V W
;  W X
public"" 

virtual"" 
ICollection"" 
<"" 
MgrAssignedEnquire"" 1
>""1 2
MgrAssignedEnquires""3 F
{""G H
get""I L
;""L M
set""N Q
;""Q R
}""S T
=""U V
new""W Z
List""[ _
<""_ `
MgrAssignedEnquire""` r
>""r s
(""s t
)""t u
;""u v
}## ÅÄ
ZC:\Eurofins Training\ConsoleApp\EnquiryModule\EnquiryModule\Models\EnquiryModuleContext.cs
	namespace 	
EnquiryModule
 
. 
Models 
; 
[ #
ExcludeFromCodeCoverage 
] 
public		 
partial		 
class		  
EnquiryModuleContext		 )
:		* +
	DbContext		, 5
{

 
public 
 
EnquiryModuleContext 
(  
)  !
{ 
} 
public 
 
EnquiryModuleContext 
(  
DbContextOptions  0
<0 1 
EnquiryModuleContext1 E
>E F
optionsG N
)N O
: 	
base
 
( 
options 
) 
{ 
} 
public 

virtual 
DbSet 
< 
DocType  
>  !
DocTypes" *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 

virtual 
DbSet 
< 
Document !
>! "
	Documents# ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 

virtual 
DbSet 
< 
Enquirer !
>! "
	Enquirers# ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 

virtual 
DbSet 
< 
Manager  
>  !
Managers" *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 

virtual 
DbSet 
< 
MgrAssignedEnquire +
>+ ,
MgrAssignedEnquires- @
{A B
getC F
;F G
setH K
;K L
}M N
	protected 
override 
void 
OnConfiguring )
() *#
DbContextOptionsBuilder* A
optionsBuilderB P
)P Q
=>   

optionsBuilder   
.   
UseSqlServer   &
(  & '
$str	  ' Ñ
)
  Ñ Ö
;
  Ö Ü
	protected"" 
override"" 
void"" 
OnModelCreating"" +
(""+ ,
ModelBuilder"", 8
modelBuilder""9 E
)""E F
{## 
modelBuilder$$ 
.$$ 
Entity$$ 
<$$ 
DocType$$ #
>$$# $
($$$ %
entity$$% +
=>$$, .
{%% 	
entity&& 
.&& 
HasKey&& 
(&& 
e&& 
=>&& 
e&&  
.&&  !
DocType1&&! )
)&&) *
.&&* +
HasName&&+ 2
(&&2 3
$str&&3 S
)&&S T
;&&T U
entity(( 
.(( 
Property(( 
((( 
e(( 
=>((  
e((! "
.((" #
DocType1((# +
)((+ ,
.)) 
ValueGeneratedNever)) $
())$ %
)))% &
.** 
HasColumnName** 
(** 
$str** (
)**( )
;**) *
entity++ 
.++ 
Property++ 
(++ 
e++ 
=>++  
e++! "
.++" #
DocName++# *
)++* +
.,, 
HasMaxLength,, 
(,, 
$num,,  
),,  !
.-- 
	IsUnicode-- 
(-- 
false--  
)--  !
... 
IsFixedLength.. 
(.. 
)..  
.// 
HasColumnName// 
(// 
$str// (
)//( )
;//) *
entity00 
.00 
Property00 
(00 
e00 
=>00  
e00! "
.00" #
Isactive00# +
)00+ ,
.00, -
HasColumnName00- :
(00: ;
$str00; E
)00E F
;00F G
}11 	
)11	 

;11
 
modelBuilder33 
.33 
Entity33 
<33 
Document33 $
>33$ %
(33% &
entity33& ,
=>33- /
{44 	
entity55 
.55 
HasKey55 
(55 
e55 
=>55 
e55  
.55  !
DocId55! &
)55& '
.55' (
HasName55( /
(55/ 0
$str550 P
)55P Q
;55Q R
entity77 
.77 
HasOne77 
(77 
d77 
=>77 
d77  
.77  !
DocType77! (
)77( )
.77) *
WithMany77* 2
(772 3
p773 4
=>775 7
p778 9
.779 :
	Documents77: C
)77C D
.88 
HasForeignKey88 
(88 
d88  
=>88! #
d88$ %
.88% &
	DocTypeId88& /
)88/ 0
.99 
OnDelete99 
(99 
DeleteBehavior99 (
.99( )
ClientSetNull99) 6
)996 7
.:: 
HasConstraintName:: "
(::" #
$str::# 2
)::2 3
;::3 4
entity<< 
.<< 
HasOne<< 
(<< 
d<< 
=><< 
d<<  
.<<  !
Enq<<! $
)<<$ %
.<<% &
WithMany<<& .
(<<. /
p<</ 0
=><<1 3
p<<4 5
.<<5 6
	Documents<<6 ?
)<<? @
.== 
HasForeignKey== 
(== 
d==  
=>==! #
d==$ %
.==% &
EnqId==& +
)==+ ,
.>> 
OnDelete>> 
(>> 
DeleteBehavior>> (
.>>( )
ClientSetNull>>) 6
)>>6 7
.?? 
HasConstraintName?? "
(??" #
$str??# 5
)??5 6
;??6 7
}@@ 	
)@@	 

;@@
 
modelBuilderBB 
.BB 
EntityBB 
<BB 
EnquirerBB $
>BB$ %
(BB% &
entityBB& ,
=>BB- /
{CC 	
entityDD 
.DD 
HasKeyDD 
(DD 
eDD 
=>DD 
eDD  
.DD  !
	EnquiryIdDD! *
)DD* +
.DD+ ,
HasNameDD, 3
(DD3 4
$strDD4 T
)DDT U
;DDU V
entityFF 
.FF 
ToTableFF 
(FF 
$strFF %
)FF% &
;FF& '
entityHH 
.HH 
PropertyHH 
(HH 
eHH 
=>HH  
eHH! "
.HH" #
AddrHH# '
)HH' (
.HH( )
HasMaxLengthHH) 5
(HH5 6
$numHH6 9
)HH9 :
;HH: ;
entityII 
.II 
PropertyII 
(II 
eII 
=>II  
eII! "
.II" #
CityII# '
)II' (
.II( )
HasMaxLengthII) 5
(II5 6
$numII6 9
)II9 :
;II: ;
entityJJ 
.JJ 
PropertyJJ 
(JJ 
eJJ 
=>JJ  
eJJ! "
.JJ" #
CountryJJ# *
)JJ* +
.JJ+ ,
HasMaxLengthJJ, 8
(JJ8 9
$numJJ9 <
)JJ< =
;JJ= >
entityKK 
.KK 
PropertyKK 
(KK 
eKK 
=>KK  
eKK! "
.KK" #
DobKK# &
)KK& '
.KK' (
HasColumnNameKK( 5
(KK5 6
$strKK6 ;
)KK; <
;KK< =
entityLL 
.LL 
PropertyLL 
(LL 
eLL 
=>LL  
eLL! "
.LL" #
EmailLL# (
)LL( )
.LL) *
HasMaxLengthLL* 6
(LL6 7
$numLL7 :
)LL: ;
;LL; <
entityMM 
.MM 
PropertyMM 
(MM 
eMM 
=>MM  
eMM! "
.MM" #
	FirstNameMM# ,
)MM, -
.MM- .
HasMaxLengthMM. :
(MM: ;
$numMM; >
)MM> ?
;MM? @
entityNN 
.NN 
PropertyNN 
(NN 
eNN 
=>NN  
eNN! "
.NN" #
GenderNN# )
)NN) *
.NN* +
HasMaxLengthNN+ 7
(NN7 8
$numNN8 :
)NN: ;
;NN; <
entityOO 
.OO 
PropertyOO 
(OO 
eOO 
=>OO  
eOO! "
.OO" #
LastNameOO# +
)OO+ ,
.OO, -
HasMaxLengthOO- 9
(OO9 :
$numOO: =
)OO= >
;OO> ?
entityPP 
.PP 
PropertyPP 
(PP 
ePP 
=>PP  
ePP! "
.PP" #
MaritalStatusPP# 0
)PP0 1
.PP1 2
HasMaxLengthPP2 >
(PP> ?
$numPP? B
)PPB C
;PPC D
entityQQ 
.QQ 
PropertyQQ 
(QQ 
eQQ 
=>QQ  
eQQ! "
.QQ" #
PhoneNoQQ# *
)QQ* +
.QQ+ ,
HasMaxLengthQQ, 8
(QQ8 9
$numQQ9 ;
)QQ; <
;QQ< =
entityRR 
.RR 
PropertyRR 
(RR 
eRR 
=>RR  
eRR! "
.RR" #
PinCodeRR# *
)RR* +
.RR+ ,
HasMaxLengthRR, 8
(RR8 9
$numRR9 :
)RR: ;
;RR; <
entitySS 
.SS 
PropertySS 
(SS 
eSS 
=>SS  
eSS! "
.SS" #
StatSS# '
)SS' (
.SS( )
HasMaxLengthSS) 5
(SS5 6
$numSS6 9
)SS9 :
;SS: ;
entityUU 
.UU 
HasOneUU 
(UU 
dUU 
=>UU 
dUU  
.UU  !
EmployeeUU! )
)UU) *
.UU* +
WithManyUU+ 3
(UU3 4
pUU4 5
=>UU6 8
pUU9 :
.UU: ;
	EnquirersUU; D
)UUD E
.VV 
HasForeignKeyVV 
(VV 
dVV  
=>VV! #
dVV$ %
.VV% &

EmployeeIdVV& 0
)VV0 1
.WW 
HasConstraintNameWW "
(WW" #
$strWW# 7
)WW7 8
;WW8 9
}XX 	
)XX	 

;XX
 
modelBuilderZZ 
.ZZ 
EntityZZ 
<ZZ 
ManagerZZ #
>ZZ# $
(ZZ$ %
entityZZ% +
=>ZZ, .
{[[ 	
entity\\ 
.\\ 
HasKey\\ 
(\\ 
e\\ 
=>\\ 
e\\  
.\\  !
EmpId\\! &
)\\& '
.\\' (
HasName\\( /
(\\/ 0
$str\\0 P
)\\P Q
;\\Q R
entity^^ 
.^^ 
Property^^ 
(^^ 
e^^ 
=>^^  
e^^! "
.^^" #
EmpId^^# (
)^^( )
.__ 
ValueGeneratedNever__ $
(__$ %
)__% &
.`` 
HasColumnName`` 
(`` 
$str`` '
)``' (
;``( )
entityaa 
.aa 
Propertyaa 
(aa 
eaa 
=>aa  
eaa! "
.aa" #
AddressLineaa# .
)aa. /
.bb 
HasMaxLengthbb 
(bb 
$numbb !
)bb! "
.cc 
	IsUnicodecc 
(cc 
falsecc  
)cc  !
;cc! "
entitydd 
.dd 
Propertydd 
(dd 
edd 
=>dd  
edd! "
.dd" #
Citydd# '
)dd' (
.ee 
HasMaxLengthee 
(ee 
$numee  
)ee  !
.ff 
	IsUnicodeff 
(ff 
falseff  
)ff  !
;ff! "
entitygg 
.gg 
Propertygg 
(gg 
egg 
=>gg  
egg! "
.gg" #
Countrygg# *
)gg* +
.hh 
HasMaxLengthhh 
(hh 
$numhh  
)hh  !
.ii 
	IsUnicodeii 
(ii 
falseii  
)ii  !
;ii! "
entityjj 
.jj 
Propertyjj 
(jj 
ejj 
=>jj  
ejj! "
.jj" #
Emailjj# (
)jj( )
.kk 
HasMaxLengthkk 
(kk 
$numkk  
)kk  !
.ll 
	IsUnicodell 
(ll 
falsell  
)ll  !
;ll! "
entitymm 
.mm 
Propertymm 
(mm 
emm 
=>mm  
emm! "
.mm" #
	FirstNamemm# ,
)mm, -
.nn 
HasMaxLengthnn 
(nn 
$numnn  
)nn  !
.oo 
	IsUnicodeoo 
(oo 
falseoo  
)oo  !
;oo! "
entitypp 
.pp 
Propertypp 
(pp 
epp 
=>pp  
epp! "
.pp" #
LastNamepp# +
)pp+ ,
.qq 
HasMaxLengthqq 
(qq 
$numqq  
)qq  !
.rr 
	IsUnicoderr 
(rr 
falserr  
)rr  !
;rr! "
entityss 
.ss 
Propertyss 
(ss 
ess 
=>ss  
ess! "
.ss" #
PhoneNumberss# .
)ss. /
.tt 
HasMaxLengthtt 
(tt 
$numtt  
)tt  !
.uu 
	IsUnicodeuu 
(uu 
falseuu  
)uu  !
.vv 
IsFixedLengthvv 
(vv 
)vv  
;vv  !
}ww 	
)ww	 

;ww
 
modelBuilderyy 
.yy 
Entityyy 
<yy 
MgrAssignedEnquireyy .
>yy. /
(yy/ 0
entityyy0 6
=>yy7 9
{zz 	
entity{{ 
.{{ 
HasKey{{ 
({{ 
e{{ 
=>{{ 
e{{  
.{{  !!
MgrAssignedEnquiresId{{! 6
){{6 7
.{{7 8
HasName{{8 ?
({{? @
$str{{@ `
){{` a
;{{a b
entity}} 
.}} 
Property}} 
(}} 
e}} 
=>}}  
e}}! "
.}}" #
Isprocessed}}# .
)}}. /
.}}/ 0
HasColumnName}}0 =
(}}= >
$str}}> K
)}}K L
;}}L M
entity 
. 
HasOne 
( 
d 
=> 
d  
.  !
Emp! $
)$ %
.% &
WithMany& .
(. /
p/ 0
=>1 3
p4 5
.5 6
MgrAssignedEnquires6 I
)I J
.
ÄÄ 
HasForeignKey
ÄÄ 
(
ÄÄ 
d
ÄÄ  
=>
ÄÄ! #
d
ÄÄ$ %
.
ÄÄ% &
EmpId
ÄÄ& +
)
ÄÄ+ ,
.
ÅÅ 
HasConstraintName
ÅÅ "
(
ÅÅ" #
$str
ÅÅ# -
)
ÅÅ- .
;
ÅÅ. /
entity
ÉÉ 
.
ÉÉ 
HasOne
ÉÉ 
(
ÉÉ 
d
ÉÉ 
=>
ÉÉ 
d
ÉÉ  
.
ÉÉ  !
Enquiry
ÉÉ! (
)
ÉÉ( )
.
ÉÉ) *
WithMany
ÉÉ* 2
(
ÉÉ2 3
p
ÉÉ3 4
=>
ÉÉ5 7
p
ÉÉ8 9
.
ÉÉ9 :!
MgrAssignedEnquires
ÉÉ: M
)
ÉÉM N
.
ÑÑ 
HasForeignKey
ÑÑ 
(
ÑÑ 
d
ÑÑ  
=>
ÑÑ! #
d
ÑÑ$ %
.
ÑÑ% &
	EnquiryId
ÑÑ& /
)
ÑÑ/ 0
.
ÖÖ 
HasConstraintName
ÖÖ "
(
ÖÖ" #
$str
ÖÖ# -
)
ÖÖ- .
;
ÖÖ. /
}
ÜÜ 	
)
ÜÜ	 

;
ÜÜ
 $
OnModelCreatingPartial
àà 
(
àà 
modelBuilder
àà +
)
àà+ ,
;
àà, -
}
ââ 
partial
ãã 
void
ãã $
OnModelCreatingPartial
ãã '
(
ãã' (
ModelBuilder
ãã( 4
modelBuilder
ãã5 A
)
ããA B
;
ããB C
}åå é
XC:\Eurofins Training\ConsoleApp\EnquiryModule\EnquiryModule\Models\MgrAssignedEnquire.cs
	namespace 	
EnquiryModule
 
. 
Models 
; 
[ #
ExcludeFromCodeCoverage 
] 
public 
partial 
class 
MgrAssignedEnquire '
{		 
public

 

int

 !
MgrAssignedEnquiresId

 $
{

% &
get

' *
;

* +
set

, /
;

/ 0
}

1 2
public 

int 
? 
EmpId 
{ 
get 
; 
set  
;  !
}" #
public 

int 
? 
	EnquiryId 
{ 
get 
;  
set! $
;$ %
}& '
public 

bool 
? 
Isprocessed 
{ 
get "
;" #
set$ '
;' (
}) *
public 

virtual 
Manager 
? 
Emp 
{  !
get" %
;% &
set' *
;* +
}, -
public 

virtual 
Enquirer 
? 
Enquiry $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} ˜9
NC:\Eurofins Training\ConsoleApp\EnquiryModule\EnquiryModule\Models\Enquirer.cs
	namespace 	
EnquiryModule
 
. 
Models 
; 
[

 #
ExcludeFromCodeCoverage

 
]

 
public 
partial 
class 
Enquirer 
{ 
public 

int 
	EnquiryId 
{ 
get 
; 
set  #
;# $
}% &
[ 
Required 
] 
[ 
EmailAddress 
] 
public 

string 
Email 
{ 
get 
; 
set "
;" #
}$ %
=& '
null( ,
!, -
;- .
[ 
Required 
] 
[ 
StringLength 
( 
$num 
, 
MinimumLength $
=% &
$num' (
)( )
]) *
public 

string 
	FirstName 
{ 
get !
;! "
set# &
;& '
}( )
=* +
null, 0
!0 1
;1 2
[ 
Required 
] 
[ 
StringLength 
( 
$num 
, 
MinimumLength $
=% &
$num' (
)( )
]) *
public 

string 
LastName 
{ 
get  
;  !
set" %
;% &
}' (
=) *
null+ /
!/ 0
;0 1
[ 
Required 
] 
[ 
StringLength 
( 
$num 
, 
MinimumLength $
=% &
$num' (
)( )
]) *
public 

string 
Addr 
{ 
get 
; 
set !
;! "
}# $
=% &
null' +
!+ ,
;, -
[   
Required   
]   
[!! 
Phone!! 

]!!
 
public"" 

string"" 
PhoneNo"" 
{"" 
get"" 
;""  
set""! $
;""$ %
}""& '
=""( )
null""* .
!"". /
;""/ 0
[$$ 
Required$$ 
]$$ 
[%% 
StringLength%% 
(%% 
$num%% 
,%% 
MinimumLength%% $
=%%% &
$num%%' (
)%%( )
]%%) *
public&& 

string&& 
City&& 
{&& 
get&& 
;&& 
set&& !
;&&! "
}&&# $
=&&% &
null&&' +
!&&+ ,
;&&, -
[(( 
Required(( 
](( 
[)) 
StringLength)) 
()) 
$num)) 
,)) 
MinimumLength)) $
=))% &
$num))' (
)))( )
]))) *
public** 

string** 
Stat** 
{** 
get** 
;** 
set** !
;**! "
}**# $
=**% &
null**' +
!**+ ,
;**, -
[,, 
Required,, 
],, 
[-- 
StringLength-- 
(-- 
$num-- 
,-- 
MinimumLength-- $
=--% &
$num--' (
)--( )
]--) *
public.. 

string.. 
Country.. 
{.. 
get.. 
;..  
set..! $
;..$ %
}..& '
=..( )
null..* .
!... /
;../ 0
[00 
Required00 
]00 
[11 
StringLength11 
(11 
$num11 
,11 
MinimumLength11 "
=11# $
$num11% &
)11& '
]11' (
public22 

string22 
PinCode22 
{22 
get22 
;22  
set22! $
;22$ %
}22& '
=22( )
null22* .
!22. /
;22/ 0
[44 
Required44 
]44 
[55 
StringLength55 
(55 
$num55 
)55 
]55 
public66 

string66 
MaritalStatus66 
{66  !
get66" %
;66% &
set66' *
;66* +
}66, -
=66. /
null660 4
!664 5
;665 6
[88 
Required88 
]88 
[99 
StringLength99 
(99 
$num99 
)99 
]99 
public:: 

string:: 
Gender:: 
{:: 
get:: 
;:: 
set::  #
;::# $
}::% &
=::' (
null::) -
!::- .
;::. /
[<< 
Range<< 

(<<
 
$num<< 
,<< 
$num<< 
)<< 
]<< 
public== 

int== 
Age== 
{== 
get== 
;== 
set== 
;== 
}==  
[?? 
Range?? 

(??
 
$num?? 
,?? 
$num?? 
)?? 
]?? 
public@@ 

int@@ 
Status@@ 
{@@ 
get@@ 
;@@ 
set@@  
;@@  !
}@@" #
[BB 
RequiredBB 
]BB 
[CC 
DataTypeCC 
(CC 
DataTypeCC 
.CC 
DateCC 
)CC 
]CC 
publicDD 

DateTimeDD 
DobDD 
{DD 
getDD 
;DD 
setDD "
;DD" #
}DD$ %
publicFF 

intFF 
?FF 

EmployeeIdFF 
{FF 
getFF  
;FF  !
setFF" %
;FF% &
}FF' (
[HH 
	BindNeverHH 
]HH 
[II 

JsonIgnoreII 
]II 
publicJJ 

virtualJJ 
ICollectionJJ 
<JJ 
DocumentJJ '
>JJ' (
	DocumentsJJ) 2
{JJ3 4
getJJ5 8
;JJ8 9
setJJ: =
;JJ= >
}JJ? @
=JJA B
newJJC F
ListJJG K
<JJK L
DocumentJJL T
>JJT U
(JJU V
)JJV W
;JJW X
[KK 
	BindNeverKK 
]KK 
[LL 

JsonIgnoreLL 
]LL 
publicMM 

virtualMM 
ManagerMM 
?MM 
EmployeeMM $
{MM% &
getMM' *
;MM* +
setMM, /
;MM/ 0
}MM1 2
[NN 
	BindNeverNN 
]NN 
[OO 

JsonIgnoreOO 
]OO 
publicPP 

virtualPP 
ICollectionPP 
<PP 
MgrAssignedEnquirePP 1
>PP1 2
MgrAssignedEnquiresPP3 F
{PPG H
getPPI L
;PPL M
setPPN Q
;PPQ R
}PPS T
=PPU V
newPPW Z
ListPP[ _
<PP_ `
MgrAssignedEnquirePP` r
>PPr s
(PPs t
)PPt u
;PPu v
}QQ ñ 
UC:\Eurofins Training\ConsoleApp\EnquiryModule\EnquiryModule\Models\DocumentRequest.cs
	namespace 	
EnquiryModule
 
. 
Models 
{ 
[ #
ExcludeFromCodeCoverage 
] 
public 

class 
DocumentRequest  
{		 
[ 	
Required	 
] 
public 
int 
EnqId 
{ 
get 
; 
set  #
;# $
}% &
[ 	
Required	 
] 
public 
int 
	DocTypeId 
{ 
get "
;" #
set$ '
;' (
}) *
[ 	
Required	 
] 
public 
	IFormFile 
? 
Doc 
{ 
get  #
;# $
set% (
;( )
}* +
} 
public 

class !
UpdateDocumentRequest &
{ 
public 
int 
DocId 
{ 
get 
; 
set  #
;# $
}% &
[ 	
Required	 
] 
public 
int 
EnqId 
{ 
get 
; 
set  #
;# $
}% &
public 
int 
CustId 
{ 
get 
;  
set! $
;$ %
}& '
[   	
Required  	 
]   
public!! 
int!! 
	DocTypeId!! 
{!! 
get!! "
;!!" #
set!!$ '
;!!' (
}!!) *
[## 	
Required##	 
]## 
public$$ 
int$$ 
Status$$ 
{$$ 
get$$ 
;$$  
set$$! $
;$$$ %
}$$& '
[&& 	
Required&&	 
]&& 
public'' 
	IFormFile'' 
?'' 
Doc'' 
{'' 
get''  #
;''# $
set''% (
;''( )
}''* +
})) 
public** 

class** 
GetDocumentRequest** #
{++ 
public-- 
int-- 
DocId-- 
{-- 
get-- 
;-- 
set--  #
;--# $
}--% &
[// 	
Required//	 
]// 
public00 
int00 
EnqId00 
{00 
get00 
;00 
set00  #
;00# $
}00% &
public22 
int22 
CustId22 
{22 
get22 
;22  
set22! $
;22$ %
}22& '
[44 	
Required44	 
]44 
public55 
int55 
	DocTypeId55 
{55 
get55 "
;55" #
set55$ '
;55' (
}55) *
[77 	
Required77	 
]77 
public88 
int88 
Status88 
{88 
get88 
;88  
set88! $
;88$ %
}88& '
}<< 
public== 

class== 
DocWithImageData== !
{>> 
public?? 
GetDocumentRequest?? !
???! "
DocModel??# +
{??, -
get??. 1
;??1 2
set??3 6
;??6 7
}??8 9
public@@ 
string@@ 
?@@ 
	ImageData@@  
{@@! "
get@@# &
;@@& '
set@@( +
;@@+ ,
}@@- .
}AA 
publicBB 

classBB 
DocumentResponseBB !
{CC 
publicDD 
intDD 
docIdDD 
{DD 
getDD 
;DD 
setDD  #
;DD# $
}DD% &
publicEE 
stringEE 
?EE 
updatedImageEE #
{EE$ %
getEE& )
;EE) *
setEE+ .
;EE. /
}EE0 1
}FF 
}GG À
NC:\Eurofins Training\ConsoleApp\EnquiryModule\EnquiryModule\Models\Document.cs
	namespace 	
EnquiryModule
 
. 
Models 
; 
[ #
ExcludeFromCodeCoverage 
] 
public		 
partial		 
class		 
Document		 
{

 
public 

int 
DocId 
{ 
get 
; 
set 
;  
}! "
[ 
Required 
] 
public 

int 
EnqId 
{ 
get 
; 
set 
;  
}! "
public 

int 
? 
CustId 
{ 
get 
; 
set !
;! "
}# $
[ 
Required 
] 
public 

int 
	DocTypeId 
{ 
get 
; 
set  #
;# $
}% &
public 

int 
Status 
{ 
get 
; 
set  
;  !
}" #
[ 
Required 
] 
public 

byte 
[ 
] 
Doc 
{ 
get 
; 
set  
;  !
}" #
=$ %
null& *
!* +
;+ ,
public 

virtual 
DocType 
DocType "
{# $
get% (
;( )
set* -
;- .
}/ 0
=1 2
null3 7
!7 8
;8 9
public 

virtual 
Enquirer 
Enq 
{  !
get" %
;% &
set' *
;* +
}, -
=. /
null0 4
!4 5
;5 6
} Ê	
MC:\Eurofins Training\ConsoleApp\EnquiryModule\EnquiryModule\Models\DocType.cs
	namespace 	
EnquiryModule
 
. 
Models 
; 
[ #
ExcludeFromCodeCoverage 
] 
public 
partial 
class 
DocType 
{		 
public

 

int

 
DocType1

 
{

 
get

 
;

 
set

 "
;

" #
}

$ %
public 

string 
DocName 
{ 
get 
;  
set! $
;$ %
}& '
=( )
null* .
!. /
;/ 0
public 

bool 
Isactive 
{ 
get 
; 
set  #
;# $
}% &
public 

virtual 
ICollection 
< 
Document '
>' (
	Documents) 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
=A B
newC F
ListG K
<K L
DocumentL T
>T U
(U V
)V W
;W X
} Ó
\C:\Eurofins Training\ConsoleApp\EnquiryModule\EnquiryModule\Infrastructure\IEnquiryModule.cs
	namespace 	
EnquiryModule
 
. 
Infrastructure &
{ 
public 

	interface 
IEnquiryModule #
{ 
public 
Enquirer 
CreateEnquiry %
(% &
Enquirer& .
enquirer/ 7
)7 8
;8 9
public		 
Enquirer		 
UpdateEnquirer		 &
(		& '
Enquirer		' /
enquirer		0 8
)		8 9
;		9 :
public 
Enquirer 
GetEnquirer #
(# $
int$ '
	EnquiryId( 1
)1 2
;2 3
public 
Document 
CreateDocument &
(& '
int' *
enqId+ 0
,0 1
int2 5
docType6 =
,= >
byte? C
[C D
]D E
docDataF M
)M N
;N O
public 
DocWithImageData 
GetDocument  +
(+ ,
int, /
DocId0 5
)5 6
;6 7
public 
Document 
UpdateDocument &
(& '
Document' /
document0 8
)8 9
;9 :
public 
int 
? 
AssignManager !
(! "
int" %
	EnquiryId& /
)/ 0
;0 1
public 
bool 
checkManager  
(  !
int! $
?$ %
EnqId& +
,+ ,
int- 0
?0 1
EmpId2 7
)7 8
;8 9
} 
} ûÑ
_C:\Eurofins Training\ConsoleApp\EnquiryModule\EnquiryModule\Infrastructure\EnquiryModuleRepo.cs
	namespace 	
EnquiryModule
 
. 
Infrastructure &
{ 
public 

class 
EnquiryModuleRepo "
:# $
IEnquiryModule% 3
{ 
private		 
readonly		  
EnquiryModuleContext		 -
_db		. 1
;		1 2
public

 
EnquiryModuleRepo

  
(

  ! 
EnquiryModuleContext

! 5
db

6 8
)

8 9
{ 	
_db 
= 
db 
; 
} 	
public 
Document 
CreateDocument &
(& '
int' *
enqId+ 0
,0 1
int2 5
docType6 =
,= >
byte? C
[C D
]D E
docDataF M
)M N
{ 	
Document 
document 
= 
new  #
Document$ ,
(, -
)- .
;. /
document 
. 
EnqId 
= 
enqId "
;" #
document 
. 
CustId 
= 
null "
;" #
document 
. 
	DocTypeId 
=  
docType! (
;( )
document 
. 
Status 
= 
$num 
;  
document 
. 
Doc 
= 
docData "
;" #
_db 
. 
	Documents 
. 
Add 
( 
document &
)& '
;' (
_db 
. 
SaveChanges 
( 
) 
; 
return 
document 
; 
} 	
public 
Enquirer 
CreateEnquiry %
(% &
Enquirer& .
enquirer/ 7
)7 8
{ 	
_db"" 
."" 
	Enquirers"" 
."" 
Add"" 
("" 
enquirer"" %
)""% &
;""& '
_db## 
.## 
SaveChanges## 
(## 
)## 
;## 
return$$ 
enquirer$$ 
;$$ 
}&& 	
public(( 
Enquirer(( 
GetEnquirer(( #
(((# $
int(($ '
	EnquiryId((( 1
)((1 2
{)) 	
return** 
_db** 
.** 
	Enquirers** 
.**  
FirstOrDefault**  .
(**. /
e**/ 0
=>**0 2
e**2 3
.**3 4
	EnquiryId**4 =
==**> @
	EnquiryId**A J
&&**K M
e**N O
.**O P
Status**P V
!=**W Y
$num**Y Z
)**Z [
;**[ \
}++ 	
public// 
Enquirer// 
UpdateEnquirer// &
(//& '
Enquirer//' /
enquirer//0 8
)//8 9
{00 	
_db11 
.11 
	Enquirers11 
.22 
Where22 
(22 
c22 
=>22 
c22 
.22 
	EnquiryId22 #
==22$ &
enquirer22' /
.22/ 0
	EnquiryId220 9
)229 :
.33 
ExecuteUpdate33 
(33 
setters33 "
=>33# %
setters44 
.44 
SetProperty44 #
(44# $
p44$ %
=>44& (
p44) *
.44* +
Email44+ 0
,440 1
enquirer442 :
.44: ;
Email44; @
)44@ A
.55 
SetProperty55 #
(55# $
p55$ %
=>55& (
p55) *
.55* +
	FirstName55+ 4
,554 5
enquirer556 >
.55> ?
	FirstName55? H
)55H I
.66 
SetProperty66 #
(66# $
p66$ %
=>66& (
p66) *
.66* +
LastName66+ 3
,663 4
enquirer665 =
.66= >
LastName66> F
)66F G
.77 
SetProperty77 #
(77# $
p77$ %
=>77& (
p77) *
.77* +
Addr77+ /
,77/ 0
enquirer771 9
.779 :
Addr77: >
)77> ?
.88 
SetProperty88 #
(88# $
p88$ %
=>88& (
p88) *
.88* +
PhoneNo88+ 2
,882 3
enquirer884 <
.88< =
PhoneNo88= D
)88D E
.99 
SetProperty99 #
(99# $
p99$ %
=>99& (
p99) *
.99* +
City99+ /
,99/ 0
enquirer991 9
.999 :
City99: >
)99> ?
.:: 
SetProperty:: #
(::# $
p::$ %
=>::& (
p::) *
.::* +
Stat::+ /
,::/ 0
enquirer::1 9
.::9 :
Stat::: >
)::> ?
.;; 
SetProperty;; #
(;;# $
p;;$ %
=>;;& (
p;;) *
.;;* +
Country;;+ 2
,;;2 3
enquirer;;4 <
.;;< =
Country;;= D
);;D E
.<< 
SetProperty<< #
(<<# $
p<<$ %
=><<& (
p<<) *
.<<* +
PinCode<<+ 2
,<<2 3
enquirer<<4 <
.<<< =
PinCode<<= D
)<<D E
.== 
SetProperty== #
(==# $
p==$ %
=>==& (
p==) *
.==* +
MaritalStatus==+ 8
,==8 9
enquirer==: B
.==B C
MaritalStatus==C P
)==P Q
.>> 
SetProperty>> #
(>># $
p>>$ %
=>>>& (
p>>) *
.>>* +
Gender>>+ 1
,>>1 2
enquirer>>3 ;
.>>; <
Gender>>< B
)>>B C
.?? 
SetProperty?? #
(??# $
p??$ %
=>??& (
p??) *
.??* +
Age??+ .
,??. /
enquirer??0 8
.??8 9
Age??9 <
)??< =
.@@ 
SetProperty@@ #
(@@# $
p@@$ %
=>@@& (
p@@) *
.@@* +
Status@@+ 1
,@@1 2
enquirer@@3 ;
.@@; <
Status@@< B
)@@B C
.AA 
SetPropertyAA #
(AA# $
pAA$ %
=>AA& (
pAA) *
.AA* +
DobAA+ .
,AA. /
enquirerAA0 8
.AA8 9
DobAA9 <
)AA< =
.BB 
SetPropertyBB #
(BB# $
pBB$ %
=>BB& (
pBB) *
.BB* +

EmployeeIdBB+ 5
,BB5 6
enquirerBB7 ?
.BB? @

EmployeeIdBB@ J
)BBJ K
)CC 
;CC 
_dbDD 
.DD 
SaveChangesDD 
(DD 
)DD 
;DD 
returnEE 
enquirerEE 
;EE 
}FF 	
publicHH 
DocWithImageDataHH 
GetDocumentHH  +
(HH+ ,
intHH, /
DocIdHH0 5
)HH5 6
{II 	
varJJ 
documentJJ 
=JJ 
_dbJJ 
.JJ  
	DocumentsJJ  )
.JJ) *
FirstOrDefaultJJ* 8
(JJ8 9
eJJ9 :
=>JJ: <
eJJ< =
.JJ= >
DocIdJJ> C
==JJD F
DocIdJJG L
)JJL M
;JJM N
ifKK 
(KK 
documentKK 
==KK 
nullKK 
)KK  
{LL 
returnMM 
nullMM 
;MM 
}NN 
varOO 
docModelOO 
=OO 
newOO 
GetDocumentRequestOO 1
{PP 
DocIdQQ 
=QQ 
documentQQ  
.QQ  !
DocIdQQ! &
,QQ& '
EnqIdRR 
=RR 
documentRR  
.RR  !
EnqIdRR! &
,RR& '
	DocTypeIdSS 
=SS 
documentSS $
.SS$ %
	DocTypeIdSS% .
,SS. /
StatusTT 
=TT 
documentTT !
.TT! "
StatusTT" (
}VV 
;VV 
varXX 
	imageDataXX 
=XX 
(XX 
byteXX !
[XX! "
]XX" #
)XX# $
documentXX$ ,
.XX, -
DocXX- 0
;XX0 1
varYY 
base64ImageYY 
=YY 
ConvertYY %
.YY% &
ToBase64StringYY& 4
(YY4 5
	imageDataYY5 >
)YY> ?
;YY? @
returnZZ 
newZZ 
DocWithImageDataZZ '
{ZZ( )
DocModelZZ* 2
=ZZ3 4
docModelZZ5 =
,ZZ= >
	ImageDataZZ? H
=ZZI J
$strZZK d
+ZZe f
base64ImageZZg r
}ZZs t
;ZZt u
}[[ 	
public]] 
Document]] 
UpdateDocument]] &
(]]& '
Document]]' /
document]]0 8
)]]8 9
{^^ 	
_db__ 
.__ 
	Documents__ 
.``	 

Where``
 
(`` 
d`` 
=>`` 
d`` 
.`` 
DocId`` 
==`` 
document``  (
.``( )
DocId``) .
)``. /
.aa 
ExecuteUpdateaa 
(aa 
settersaa "
=>aa# %
settersbb 
.bb 
SetPropertybb  
(bb  !
pbb! "
=>bb# %
pbb& '
.bb' (
	DocTypeIdbb( 1
,bb1 2
documentbb3 ;
.bb; <
	DocTypeIdbb< E
)bbE F
.cc 
SetPropertycc  
(cc  !
pcc! "
=>cc# %
pcc& '
.cc' (
Statuscc( .
,cc. /
documentcc0 8
.cc8 9
Statuscc9 ?
)cc? @
.dd 
SetPropertydd  
(dd  !
pdd! "
=>dd# %
pdd& '
.dd' (
Docdd( +
,dd+ ,
documentdd- 5
.dd5 6
Docdd6 9
)dd9 :
)ee	 

;ee
 
_dbgg 
.gg 
SaveChangesgg 
(gg 
)gg 
;gg 
returnii 
documentii 
;ii 
}jj 	
publickk 
intkk 
?kk 
AssignManagerkk !
(kk! "
intkk" %
	EnquiryIdkk& /
)kk/ 0
{ll 	
varmm 
enquirymm 
=mm 
GetEnquirermm %
(mm% &
	EnquiryIdmm& /
)mm/ 0
;mm0 1
ifnn 
(nn 
enquirynn 
==nn 
nullnn 
)nn  
returnoo 
-oo 
$numoo 
;oo 
varqq 
MgrAssignEnqqq 
=qq 
_dbqq "
.qq" #
MgrAssignedEnquiresqq# 6
.qq6 7
FirstOrDefaultqq7 E
(qqE F
eqqF G
=>qqH J
eqqK L
.qqL M
	EnquiryIdqqM V
==qqW Y
	EnquiryIdqqZ c
)qqc d
;qqd e
ifss 
(ss 
MgrAssignEnqss 
isss 
notss  #
nullss$ (
)ss( )
returntt 
MgrAssignEnqtt #
.tt# $
EmpIdtt$ )
;tt) *
varvv  
leastLoadedManagerIdvv $
=vv% &
_dbvv' *
.vv* +
MgrAssignedEnquiresvv+ >
.ww 
Whereww 
(ww 
mww 
=>ww 
mww 
.ww 
Isprocessedww &
!=ww' )
trueww* .
)ww. /
.xx 
GroupByxx 
(xx 
mxx 
=>xx 
mxx 
.xx 
EmpIdxx "
)xx" #
.yy 
Selectyy 
(yy 
groupyy 
=>yy 
newyy !
{zz 
EmpId{{ 
={{ 
group{{ 
.{{ 
Key{{ "
,{{" #
EnquiryCount|| 
=|| 
group||  %
.||% &
Count||& +
(||+ ,
)||, -
}}} 
)}} 
.~~ 
OrderBy~~ 
(~~ 
x~~ 
=>~~ 
x~~ 
.~~ 
EnquiryCount~~ )
)~~) *
. 
Select 
( 
x 
=> 
x 
. 
EmpId !
)! "
.
ÄÄ 
FirstOrDefault
ÄÄ 
(
ÄÄ 
)
ÄÄ 
;
ÄÄ 
if
ÇÇ 
(
ÇÇ "
leastLoadedManagerId
ÇÇ $
.
ÇÇ$ %
HasValue
ÇÇ% -
)
ÇÇ- .
{
ÉÉ 
var
ÖÖ 
newAssignment
ÖÖ !
=
ÖÖ" #
new
ÖÖ$ ' 
MgrAssignedEnquire
ÖÖ( :
{
ÜÜ 
EmpId
áá 
=
áá "
leastLoadedManagerId
áá 0
.
áá0 1
Value
áá1 6
,
áá6 7
	EnquiryId
àà 
=
àà 
	EnquiryId
àà  )
,
àà) *
Isprocessed
ââ 
=
ââ  !
false
ââ" '
}
ää 
;
ää 
_db
åå 
.
åå !
MgrAssignedEnquires
åå '
.
åå' (
Add
åå( +
(
åå+ ,
newAssignment
åå, 9
)
åå9 :
;
åå: ;
_db
çç 
.
çç 
SaveChanges
çç 
(
çç  
)
çç  !
;
çç! "
return
éé "
leastLoadedManagerId
éé +
.
éé+ ,
Value
éé, 1
;
éé1 2
}
èè 
return
êê 
-
êê 
$num
êê 
;
êê 
}
ëë 	
public
íí 
int
íí 
GetAllEnquires
íí !
(
íí! "
)
íí" #
{
ìì 	
return
îî 
_db
îî 
.
îî 
	Enquirers
îî  
.
îî  !
ToList
îî! '
(
îî' (
)
îî( )
.
îî) *
Count
îî* /
(
îî/ 0
)
îî0 1
;
îî1 2
}
ïï 	
public
ññ 
bool
ññ 
checkManager
ññ  
(
ññ  !
int
ññ! $
?
ññ$ %
EnqId
ññ& +
,
ññ+ ,
int
ññ, /
?
ññ/ 0
EmpId
ññ1 6
)
ññ6 7
{
óó 	
var
òò 
data
òò 
=
òò 
_db
òò 
.
òò !
MgrAssignedEnquires
òò .
.
òò. /
FirstOrDefault
òò/ =
(
òò= >
e
òò> ?
=>
òò@ B
e
òòC D
.
òòD E
	EnquiryId
òòE N
==
òòO Q
EnqId
òòR W
&&
òòX Z
e
òò[ \
.
òò\ ]
EmpId
òò] b
==
òòb d
EmpId
òòd i
)
òòi j
;
òòj k
if
öö 
(
öö 
data
öö 
==
öö 
null
öö 
)
öö 
return
õõ 
false
õõ 
;
õõ 
return
ùù 
true
ùù 
;
ùù 
}
ûû 	
public
üü 
bool
üü 
checkDocType
üü  
(
üü  !
int
üü! $
?
üü$ %
	DocTypeId
üü& /
)
üü/ 0
{
†† 	
var
°° 
data
°° 
=
°° 
_db
°° 
.
°° 
DocTypes
°° #
.
°°# $
FirstOrDefault
°°$ 2
(
°°2 3
e
°°3 4
=>
°°5 7
e
°°8 9
.
°°9 :
DocType1
°°: B
==
°°B D
	DocTypeId
°°D M
)
°°M N
;
°°N O
if
££ 
(
££ 
data
££ 
==
££ 
null
££ 
)
££ 
return
§§ 
false
§§ 
;
§§ 
return
¶¶ 
true
¶¶ 
;
¶¶ 
}
ßß 	
public
®® 
bool
®® !
CheckValidDocUpdate
®® '
(
®®' (
int
®®( +
?
®®+ ,
DocId
®®- 2
,
®®2 3
int
®®4 7
?
®®7 8
EnqId
®®9 >
)
®®> ?
{
©© 	
var
™™ 
data
™™ 
=
™™ 
_db
™™ 
.
™™ 
	Documents
™™ $
.
™™$ %
FirstOrDefault
™™% 3
(
™™3 4
e
™™4 5
=>
™™6 8
e
™™9 :
.
™™: ;
DocId
™™; @
==
™™A C
DocId
™™D I
&&
™™J L
e
™™M N
.
™™N O
EnqId
™™O T
==
™™U W
EnqId
™™X ]
)
™™] ^
;
™™^ _
if
¨¨ 
(
¨¨ 
data
¨¨ 
==
¨¨ 
null
¨¨ 
)
¨¨ 
return
≠≠ 
false
≠≠ 
;
≠≠ 
return
ØØ 
true
ØØ 
;
ØØ 
}
∞∞ 	
}
±± 
}≤≤ Õo
\C:\Eurofins Training\ConsoleApp\EnquiryModule\EnquiryModule\Controllers\EnquiryController.cs
	namespace 	
EnquiryModule
 
. 
Controllers #
{ 
[ 
Route 

(
 
$str 
) 
] 
[		 
ApiController		 
]		 
public

 

class

 
EnquiryController

 "
:

# $
ControllerBase

% 3
{ 
private 
readonly 
EnquiryModuleRepo *
_repo+ 0
;0 1
public 
EnquiryController  
(  !
EnquiryModuleRepo! 2
repo3 7
)7 8
{ 	
_repo 
= 
repo 
; 
} 	
[ 	
HttpPost	 
( 
$str !
)! "
]" #
public 
IActionResult 
CreateEnquiry *
(* +
[+ ,
FromBody, 4
]4 5
Enquirer6 >
?> ?
enquirer@ H
)H I
{ 	
try 
{ 
if 
( 
! 

ModelState 
.  
IsValid  '
)' (
{ 
return 

BadRequest %
(% &

ModelState& 0
)0 1
;1 2
} 
if 
( 
enquirer 
? 
. 

EmployeeId '
!=' )
null) -
)- .
{   
return!! 

BadRequest!! %
(!!% &
$str!!& B
)!!B C
;!!C D
}"" 
return## 
Ok## 
(## 
_repo## 
.##  
CreateEnquiry##  -
(##- .
enquirer##. 6
)##6 7
)##7 8
;##8 9
}$$ 
catch%% 
(%% 
	Exception%% 
ex%% 
)%%  
{&& 
return'' 

BadRequest'' 
('' 
ex'' !
.''! "
Message''" )
)'') *
;''* +
}(( 
}++ 	
[,, 	
HttpGet,,	 
(,, 
$str,, 
),, 
],, 
public-- 
IActionResult-- 
GetEnquiryById-- +
(--+ ,
int--, /
	EnquiryId--0 9
)--9 :
{.. 	
var// 
enquirer// 
=// 
_repo//  
.//  !
GetEnquirer//! ,
(//, -
	EnquiryId//- 6
)//6 7
;//7 8
if00 
(00 
enquirer00 
==00 
null00  
)00  !
{11 
return22 
NotFound22 
(22  
$str22  3
)223 4
;224 5
}33 
return44 
Ok44 
(44 
enquirer44 
)44 
;44  
}55 	
[77 	
HttpPut77	 
(77 
$str77  
)77  !
]77! "
public88 
IActionResult88 
UpdateEnquiry88 *
(88* +
[88+ ,
FromBody88, 4
]884 5
Enquirer886 >
enquirer88? G
)88G H
{99 	
try:: 
{;; 
if>> 
(>> 
!>> 

ModelState>> 
.>>  
IsValid>>  '
)>>' (
{?? 
return@@ 

BadRequest@@ %
(@@% &

ModelState@@& 0
)@@0 1
;@@1 2
}AA 
ifCC 
(CC 
_repoCC 
.CC 
GetEnquirerCC %
(CC% &
enquirerCC& .
.CC. /
	EnquiryIdCC/ 8
)CC8 9
isCC: <
notCC= @
nullCCA E
)CCE F
{DD 
ifEE 
(EE 
_repoEE 
.EE 
checkManagerEE *
(EE* +
enquirerEE+ 3
.EE3 4
	EnquiryIdEE4 =
,EE= >
enquirerEE> F
.EEF G

EmployeeIdEEG Q
)EEQ R
)EER S
returnFF 
OkFF !
(FF! "
_repoFF" '
.FF' (
UpdateEnquirerFF( 6
(FF6 7
enquirerFF7 ?
)FF? @
)FF@ A
;FFA B
elseGG 
returnHH 
NotFoundHH '
(HH' (
$strHH( 9
)HH9 :
;HH: ;
}II 
elseJJ 
returnKK 
NotFoundKK #
(KK# $
$strKK$ 7
+KK7 8
enquirerKK8 @
.KK@ A
	EnquiryIdKKA J
+KKJ K
$strKKK \
)KK\ ]
;KK] ^
}MM 
catchNN 
(NN 
	ExceptionNN 
exNN 
)NN  
{OO 
returnPP 

BadRequestPP !
(PP! "
exPP" $
.PP$ %
MessagePP% ,
)PP, -
;PP- .
}QQ 
}RR 	
[SS 	
HttpPostSS	 
(SS 
$strSS "
)SS" #
]SS# $
publicTT 
asyncTT 
TaskTT 
<TT 
IActionResultTT '
>TT' (
UploadDocumentTT) 7
(TT7 8
DocumentRequestTT8 G
docModelTTH P
)TTP Q
{UU 	
ifVV 
(VV 
docModelVV 
==VV 
nullVV  
||VV! #
docModelVV$ ,
.VV, -
DocVV- 0
==VV1 3
nullVV4 8
||VV9 ;
docModelVV< D
.VVD E
DocVVE H
.VVH I
LengthVVI O
==VVP R
$numVVS T
)VVT U
returnWW 

BadRequestWW !
(WW! "
$strWW" 4
)WW4 5
;WW5 6
ifYY 
(YY 
_repoYY 
.YY 
GetEnquirerYY !
(YY! "
docModelYY" *
.YY* +
EnqIdYY+ 0
)YY0 1
isYY2 4
nullYY5 9
)YY9 :
returnZZ 
NotFoundZZ 
(ZZ  
$strZZ  4
)ZZ4 5
;ZZ5 6
if\\ 
(\\ 
!\\ 
_repo\\ 
.\\ 
checkDocType\\ #
(\\# $
docModel\\$ ,
.\\, -
	DocTypeId\\- 6
)\\6 7
)\\7 8
return]] 
NotFound]] 
(]]  
$str]]  6
)]]6 7
;]]7 8
using__ 
(__ 
var__ 
memoryStream__ #
=__$ %
new__& )
MemoryStream__* 6
(__6 7
)__7 8
)__8 9
{`` 
awaitaa 
docModelaa 
.aa 
Docaa "
.aa" #
CopyToAsyncaa# .
(aa. /
memoryStreamaa/ ;
)aa; <
;aa< =
varbb 
docDatabb 
=bb 
memoryStreambb *
.bb* +
ToArraybb+ 2
(bb2 3
)bb3 4
;bb4 5
varee 
docIdee 
=ee 
_repoee !
.ee! "
CreateDocumentee" 0
(ee0 1
docModelee1 9
.ee9 :
EnqIdee: ?
,ee? @
docModeleeA I
.eeI J
	DocTypeIdeeJ S
,eeS T
docDataeeU \
)ee\ ]
;ee] ^
returngg 
Okgg 
(gg 
newgg 
{gg 
DocIdgg  %
=gg& '
docIdgg( -
}gg. /
)gg/ 0
;gg0 1
}hh 
}ii 	
[kk 	
HttpGetkk	 
(kk 
$strkk 
)kk 
]kk  
publicll 
IActionResultll 
GetDocumentByIdll ,
(ll, -
intll- 0
DocIdll1 6
)ll6 7
{mm 	
varnn 
documentnn 
=nn 
_reponn  
.nn  !
GetDocumentnn! ,
(nn, -
DocIdnn- 2
)nn2 3
;nn3 4
ifoo 
(oo 
documentoo 
isoo 
notoo 
nulloo  $
)oo$ %
returnpp 
Okpp 
(pp 
documentpp "
)pp" #
;pp# $
returnrr 
NotFoundrr 
(rr 
$strrr 0
)rr0 1
;rr1 2
}ss 	
[uu 	
HttpPutuu	 
(uu 
$struu !
)uu! "
]uu" #
publicvv 
asyncvv 
Taskvv 
<vv 
IActionResultvv '
>vv' (
UpdateDocumentvv) 7
(vv7 8!
UpdateDocumentRequestvv8 M
docModelvvN V
)vvV W
{ww 	
ifxx 
(xx 
docModelxx 
==xx 
nullxx  
||xx! #
docModelxx$ ,
.xx, -
Docxx- 0
==xx1 3
nullxx4 8
||xx9 ;
docModelxx< D
.xxD E
DocxxE H
.xxH I
LengthxxI O
==xxP R
$numxxS T
)xxT U
returnyy 

BadRequestyy !
(yy! "
$stryy" 4
)yy4 5
;yy5 6
if{{ 
({{ 
!{{ 
_repo{{ 
.{{ 
checkDocType{{ #
({{# $
docModel{{$ ,
.{{, -
	DocTypeId{{- 6
){{6 7
){{7 8
return|| 
NotFound|| 
(||  
$str||  6
)||6 7
;||7 8
if~~ 
(~~ 
docModel~~ 
.~~ 
Status~~ 
>~~  !
$num~~" #
||~~$ &
docModel~~' /
.~~/ 0
Status~~0 6
<~~7 8
$num~~9 :
)~~: ;
return 

BadRequest !
(! "
$str" 7
)7 8
;8 9
if
ÅÅ 
(
ÅÅ 
!
ÅÅ 
_repo
ÅÅ 
.
ÅÅ !
CheckValidDocUpdate
ÅÅ *
(
ÅÅ* +
docModel
ÅÅ+ 3
.
ÅÅ3 4
DocId
ÅÅ4 9
,
ÅÅ9 :
docModel
ÅÅ; C
.
ÅÅC D
EnqId
ÅÅD I
)
ÅÅI J
)
ÅÅJ K
return
ÇÇ 

BadRequest
ÇÇ !
(
ÇÇ! "
$str
ÇÇ" :
)
ÇÇ: ;
;
ÇÇ; <
using
ÑÑ 
(
ÑÑ 
var
ÑÑ 
memoryStream
ÑÑ #
=
ÑÑ$ %
new
ÑÑ& )
MemoryStream
ÑÑ* 6
(
ÑÑ6 7
)
ÑÑ7 8
)
ÑÑ8 9
{
ÖÖ 
await
ÜÜ 
docModel
ÜÜ 
.
ÜÜ 
Doc
ÜÜ "
.
ÜÜ" #
CopyToAsync
ÜÜ# .
(
ÜÜ. /
memoryStream
ÜÜ/ ;
)
ÜÜ; <
;
ÜÜ< =
var
áá 
docData
áá 
=
áá 
memoryStream
áá *
.
áá* +
ToArray
áá+ 2
(
áá2 3
)
áá3 4
;
áá4 5
Document
ââ 
document
ââ !
=
ââ" #
new
ââ$ '
Document
ââ( 0
(
ââ0 1
)
ââ1 2
;
ââ2 3
document
ää 
.
ää 
DocId
ää 
=
ää  
docModel
ää! )
.
ää) *
DocId
ää* /
;
ää/ 0
document
ãã 
.
ãã 
EnqId
ãã 
=
ãã  
docModel
ãã! )
.
ãã) *
EnqId
ãã* /
;
ãã/ 0
document
åå 
.
åå 
CustId
åå 
=
åå  !
docModel
åå" *
.
åå* +
CustId
åå+ 1
;
åå1 2
document
çç 
.
çç 
Status
çç 
=
çç  !
docModel
çç" *
.
çç* +
Status
çç+ 1
;
çç1 2
document
éé 
.
éé 
Doc
éé 
=
éé 
docData
éé &
;
éé& '
document
èè 
.
èè 
	DocTypeId
èè "
=
èè# $
docModel
èè% -
.
èè- .
	DocTypeId
èè. 7
;
èè7 8
var
êê 
doc
êê 
=
êê 
_repo
êê 
.
êê  
UpdateDocument
êê  .
(
êê. /
document
êê/ 7
)
êê7 8
;
êê8 9
var
íí 
base64Image
íí 
=
íí  !
Convert
íí" )
.
íí) *
ToBase64String
íí* 8
(
íí8 9
document
íí9 A
.
ííA B
Doc
ííB E
)
ííE F
;
ííF G
DocumentResponse
ìì  
docRes
ìì! '
=
ìì( )
new
ìì* -
DocumentResponse
ìì. >
(
ìì> ?
)
ìì? @
;
ìì@ A
docRes
îî 
.
îî 
docId
îî 
=
îî 
doc
îî "
.
îî" #
DocId
îî# (
;
îî( )
docRes
ïï 
.
ïï 
updatedImage
ïï #
=
ïï$ %
$str
ïï& ?
+
ïï@ A
base64Image
ïïB M
;
ïïM N
return
ññ 
Ok
ññ 
(
ññ 
docRes
ññ  
)
ññ  !
;
ññ! "
}
óó 
}
òò 	
[
ôô 	
HttpPost
ôô	 
(
ôô 
$str
ôô !
)
ôô! "
]
ôô" #
public
öö 
IActionResult
öö 
AssignManager
öö *
(
öö* +
[
öö+ ,
FromBody
öö, 4
]
öö4 5
int
öö5 8
EnqId
öö9 >
)
öö> ?
{
õõ 	
var
úú 
response
úú 
=
úú 
_repo
úú  
.
úú  !
AssignManager
úú! .
(
úú. /
EnqId
úú/ 4
)
úú4 5
;
úú5 6
if
ùù 
(
ùù 
response
ùù 
==
ùù 
-
ùù 
$num
ùù 
)
ùù 
return
ûû 
NotFound
ûû 
(
ûû  
$str
ûû  4
)
ûû4 5
;
ûû5 6
return
†† 
Ok
†† 
(
†† 
response
†† 
)
†† 
;
††  
}
°° 	
[
££ 	
HttpGet
££	 
(
££ 
$str
££ !
)
££! "
]
££" #
public
§§ 
int
§§ 
GetAllEnquires
§§ !
(
§§! "
)
§§" #
{
•• 	
return
¶¶ 
_repo
¶¶ 
.
¶¶ 
GetAllEnquires
¶¶ '
(
¶¶' (
)
¶¶( )
;
¶¶) *
}
ßß 	
}
©© 
}™™ 